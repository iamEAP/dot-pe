{"version":3,"sources":["webpack:///./src/layouts/en.js","webpack:///./src/pages/engineers/better-wdc-performance-with-promises.js"],"names":["Layout","props","title","children","location","isTranslated","React","useState","toggleNav","setToggleNav","langKey","context","setContext","Provider","value","className","onClick","aria-label","role","aria-controls","id","to","pathname","forceLang","action","method","target","style","paddingBottom","name","type","class","placeholder","Date","getFullYear","href","rel","color","LegacyWdcPromisesPage","data","siteTitle","site","siteMetadata","keywords","img","promises","childImageSharp","fluid","src","waterfallSync","waterfallAsync","query","render"],"mappings":"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","file":"component---src-pages-engineers-better-wdc-performance-with-promises-js-998ad1583d3f50abd678.js","sourcesContent":["import React from \"react\"\nimport Link from \"../components/link\"\nimport { LanguageContext } from \"../contexts/language\"\nimport \"../i18n\"\n\nconst Layout = props => {\n  const { title, children, location, isTranslated = false } = props\n  const [toggleNav, setToggleNav] = React.useState(false)\n  const [context, setContext] = React.useState({ langKey: \"en\", isTranslated })\n\n  return (\n    <LanguageContext.Provider value={[context, setContext]}>\n      <div className={`site-wrapper ${toggleNav ? `site-head-open` : ``}`}>\n        <header className=\"site-head\">\n          <div className=\"site-head-container\">\n            <button\n              className=\"nav-burger\"\n              onClick={() => setToggleNav(!toggleNav)}\n            >\n              <div\n                className=\"hamburger hamburger--collapse\"\n                aria-label=\"Menu\"\n                role=\"button\"\n                aria-controls=\"navigation\"\n              >\n                <div className=\"hamburger-box\">\n                  <div className=\"hamburger-inner\" />\n                </div>\n              </div>\n            </button>\n            <nav id=\"swup\" className=\"site-head-left\">\n              {/* eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role */}\n              <ul className=\"nav\" role=\"menu\">\n                {/* eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role */}\n                <li className=\"nav-home nav-current\" role=\"menuitem\">\n                  <Link to=\"/\">Home</Link>\n                </li>\n                {/* eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role */}\n                <li className=\"nav-about\" role=\"menuitem\">\n                  <Link to=\"/is\">About</Link>\n                </li>\n              </ul>\n            </nav>\n            <div className=\"site-head-center\">\n              <Link className=\"site-head-logo\" to={`/`}>\n                {title}\n              </Link>\n            </div>\n            {context.isTranslated && (\n              <div className=\"site-head-right\">\n                <div className=\"language-links\">\n                  <Link\n                    to={location.pathname}\n                    forceLang=\"en\"\n                    title=\"In English\"\n                  >\n                    English\n                  </Link>\n                  <Link\n                    to={location.pathname}\n                    forceLang=\"sv\"\n                    title=\"PÃ¥ Svenska\"\n                  >\n                    Svenska\n                  </Link>\n                </div>\n              </div>\n            )}\n          </div>\n        </header>\n        <main id=\"site-main\" className=\"site-main\">\n          <div id=\"swup\" className=\"transition-fade\">\n            {children}\n          </div>\n          <form\n            action=\"https://gumroad.com/follow_from_embed_form\"\n            className=\"post-content\"\n            method=\"post\"\n            target=\"_blank\"\n            style={{ paddingBottom: 0 }}\n          >\n            <input name=\"seller_id\" type=\"hidden\" value=\"2626546698508\" />\n            <div className=\"row gtr-uniform\">\n              <div class=\"col-10 col-12-xsmall\">\n                <input\n                  name=\"email\"\n                  placeholder=\"Your email address\"\n                  type=\"email\"\n                />\n              </div>\n              <div className=\"col-2 col-12-xsmall\">\n                <button type=\"submit\" className=\"button primary fit\">\n                  Follow\n                </button>\n              </div>\n            </div>\n          </form>\n        </main>\n        <footer className=\"site-foot\">\n          &copy; {new Date().getFullYear()} <Link to={`/`}>{title}</Link>{\" \"}\n          &mdash; Built with{\" \"}\n          <a\n            href=\"https://gatsbyjs.org\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style={{ color: \"rgb(171, 171, 171)\" }}\n          >\n            Gatsby\n          </a>\n        </footer>\n      </div>\n    </LanguageContext.Provider>\n  )\n}\n\nexport default Layout\n","/**\n * This page represents \"legacy\" content that doesn't quite fit the blog mould,\n * but gets consistent-ish enough traffic that it deserves to live on, off-nav.\n */\n\nimport React from \"react\"\nimport { graphql, StaticQuery } from \"gatsby\"\nimport Img from \"gatsby-image\"\n\nimport Layout from \"../../layouts/en\"\nimport SEO from \"../../components/seo\"\n\nimport \"../../utils/normalize.css\"\nimport \"../../utils/css/screen.css\"\n\nconst LegacyWdcPromisesPage = ({ data, location }) => {\n  const siteTitle = data.site.siteMetadata.title\n\n  return (\n    <Layout title={siteTitle} location={location}>\n      <SEO\n        title=\"Better WDC Performance with Promises\"\n        keywords={[\n          `Tableau`,\n          `Web Data Connector`,\n          `JavaScript`,\n          `Performance`,\n          `Promise`,\n        ]}\n        img={`${data.promises.childImageSharp.fluid.src}`}\n      />\n\n      <article className=\"post-content page-template no-image\">\n        <header className=\"post-content-header\">\n          <h1 className=\"post-content-title\">\n            Better WDC Performance with Promises\n          </h1>\n        </header>\n        <div className=\"post-content-body\">\n          <figure className=\"kg-card kg-image-card kg-width-full\">\n            <Img\n              fluid={data.promises.childImageSharp.fluid}\n              className=\"kg-image\"\n            />\n            <figcaption>\n              image courtesy{\" \"}\n              <a\n                href=\"https://www.flickr.com/photos/elsabordelossegundos/15418211523/\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                mariadelajuana\n              </a>\n            </figcaption>\n          </figure>\n          <p>\n            Web Data Connectors give analysts access to worlds of data\n            previously locked away behind APIs. The WDC SDK provides developers\n            a platform to standardize data extraction in a way that's friendly\n            to Tableau's suite of analytics and business intelligence software.\n          </p>\n          <p>\n            Unlike traditional databases and other data stores that are often\n            able to return a complete set of data with a single query, most APIs\n            only expose small chunks of data that must be requested separately\n            and stitched together. Typically, this is done using some form of\n            pagination: a client asks the API for some number of records, then\n            the API responds with these records, as well as some metadata about\n            how many more records remain. Based on this metadata, the client may\n            choose to perform additional queries.\n          </p>\n          <p>\n            This process constitutes the majority of a WDC's responsibility.\n          </p>\n          <h3>The standard WDC way</h3>\n          <p>\n            To this end, the WDC SDK provides a helpful{\" \"}\n            <a\n              href=\"http://onlinehelp.tableau.com/current/api/wdc/en-us/help.htm#WDC/wdc_paging.htm\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              interface for managing the pagination process\n            </a>\n            . Take for example,{\" \"}\n            <a\n              href=\"https://gist.github.com/iamEAP/6a4212c17b22004117f2#file-wdc-no-promise-js\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              the following\n            </a>\n            :\n          </p>\n\n          <pre>\n            <code>{`myConnector.getTableData = function(lastRecordToken) {\n  // If Tableau gave a page, use it. But default to 1.\n  var pageNumber = lastRecordToken ? lastRecordToken + 1 : 1;\n\n  // Load this page of data from the API.\n  $.getJSON('https://api.example.com?page=' + pageNumber, function (response) {\n    // Check if the current page is not the last page.\n    var hasMoreData = pageNumber < response.metadata.lastPage;\n\n    // Pass data and current page back to Tableau. If\n    // hasMoreData evaluated to TRUE, Tableau will call\n    // getTableData again using this pageNumber value.\n    tableau.dataCallback(response.records, pageNumber, hasMoreData);\n  });\n}`}</code>\n          </pre>\n\n          <p>\n            In the contrived example above, we've implemented the\n            <code>getTableData</code> method that Tableau calls on our\n            connector. It uses the jQuery <code>getJSON</code> method to pull\n            data from an API, defaulting to the first page of data.\n          </p>\n          <p>\n            When the API returns a response, we pass the records to Tableau,\n            along with some state (the page number we just loaded), and a\n            boolean value indicating whether or not additional data should be\n            returned (which we determine based on the current page and a\n            hypothetical \"lastPage\" metadata value returned by the API).\n          </p>\n          <p>\n            If more data should be returned, Tableau knows to call the\n            <code>getTableData</code> method again, this time passing in the\n            page number / state value we provided, which the code above will use\n            to pull in the next page of data. This process repeats itself until\n            we've run through all available pages and Tableau returns control to\n            the end-user.\n          </p>\n          <h3>The problem with the standard flow</h3>\n          <p>\n            We're able to accomplish a lot with a small amount of code, but this\n            isn't the most efficient way to pull down all of our data. A\n            significant amount of time is wasted on every page, waiting for the\n            API to receive the request, process it, and return a response. A\n            waterfall chart representing resource usage for the above code might\n            look something like this:\n          </p>\n          <div className=\"kg-card kg-image-card kg-width-full\">\n            <Img\n              fluid={data.waterfallSync.childImageSharp.fluid}\n              className=\"kg-image\"\n            />\n          </div>\n          <p>\n            As you can imagine, the performance penalty grows considerably as\n            data sets grow larger or if APIs enforce low limits on number of\n            records retrieved per query relative to the number of records\n            desired.\n          </p>\n          <p>\n            Although JavaScript execution is single-threaded (meaning only one\n            piece of code can be executed at any given time), the asynchronous\n            nature of jQuery's <code>getJSON</code> (and its underlying\n            <code>ajax</code> method) can be exploited to effectively pull down\n            data in parallel.\n          </p>\n          <p>\n            Consider{\" \"}\n            <a\n              href=\"https://gist.github.com/iamEAP/6a4212c17b22004117f2#file-thread-of-execution-js\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              the following\n            </a>\n            :\n          </p>\n\n          <pre>\n            <code>{`$.getJSON('https://api.example.com', function (response) {\n  // Executed later, once api.example.com responds with data.\n  console.log('Second: Just got data!');\n});\n\n// Executed immediately, even before the API responds.\nconsole.log('First: No data yet!');`}</code>\n          </pre>\n          <p>\n            Although we call <code>$.getJSON</code> with the intention of doing\n            something with its response data in a callback, the thread of\n            execution first continues to the instructions immediately following\n            the call. This becomes useful for us when we realize the same\n            principal holds true if we were to make a series of calls to{\" \"}\n            <code>$.getJSON</code>{\" \"}\n            <a\n              href=\"https://gist.github.com/iamEAP/6a4212c17b22004117f2#file-thread-of-execution-loop-js\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              in a loop\n            </a>\n            :\n          </p>\n\n          <pre>\n            <code>{`var pageNumbers = [1, 2, 3],\n    allResults = [];\n\n// Loop through all pages.\npageNumbers.forEach(function (page) {\n  $.getJSON('https://api.example.com?page=' + page, function (response) {\n    console.log('Later: Got data for page ' + page);\n    allResults.push(response.records);\n  });\n});\n\nconsole.log('First: No data yet!');`}</code>\n          </pre>\n\n          <p>\n            All three API calls are initiated in rapid succession in a\n            non-blocking way, immediately after which \"First: No data yet!\" is\n            printed to the console. When each request is eventually fulfilled,\n            additional messages are logged. Note that rather than sending data\n            to Tableau with each response, we append the data to an array store\n            with the intention of passing the complete data set back to Tableau\n            later. A waterfall chart for the code above might look something\n            like this:\n          </p>\n          <div className=\"kg-card kg-image-card kg-width-full\">\n            <Img\n              fluid={data.waterfallAsync.childImageSharp.fluid}\n              className=\"kg-image\"\n            />\n          </div>\n          <p>\n            We dramatically improve performance (by just under 3x), but we also\n            create complications for ourselves. In the above example, how do we\n            know when all API calls have been fulfilled? If the thread of\n            execution immediately returns to us after the loop, how do we wait\n            to pass control back to Tableau with the complete set of data?\n          </p>\n          <h3>Enter: Promises</h3>\n          <p>\n            Promises are{\" \"}\n            <a\n              href=\"https://en.wikipedia.org/wiki/Futures_and_promises#History\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              not a new concept\n            </a>\n            . Devised as a way to simplify synchronicity in concurrent or\n            asynchronous programming languages, the idea is straightforward: a\n            Promise is a placeholder for a value that hasn't yet been computed.\n            It can be <em>fulfilled</em> when the value becomes known, or{\" \"}\n            <em>rejected</em> in case of error. You can \"then\" specify code that\n            gets executed when the Promise moves from pending to fulfilled.\n          </p>\n          <p>\n            <a\n              href=\"https://gist.github.com/iamEAP/6a4212c17b22004117f2#file-wdc-naive-promise-js\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Here's a naive example\n            </a>{\" \"}\n            to illustrate how you might use Promises in JavaScript in a Web Data\n            Connector:\n          </p>\n\n          <pre>\n            <code>{`// Return a Promise for the given URL.\nvar returnApiDataFor = function(url) {\n  return new Promise(function(fulfill, reject) {\n    // When the promise is invoked, send the request.\n    $.getJSON(url, function (response) {\n      // Fulfill the promise with data returned.\n      fulfill(response.records);\n    });\n  });\n};\n\n// Invoke the promise for a given URL.\nreturnApiDataFor('https://api.example.com')\n  // Once the promise is fulfilled...\n  .then(function (records) {\n    // Pass data to Tableau.\n    tableau.dataCallback(records);\n  });`}</code>\n          </pre>\n\n          <p>\n            If we want to wait for a series of API calls to be fulfilled before\n            taking action, we can use a feature in the JavaScript specification\n            for Promises called <code>Promise.all</code>. With it, we can\n            specify an iterable object (like an array) of Promises, wait for\n            them all to be fulfilled, and then react based on the aggregation of\n            all returned values.\n          </p>\n\n          <pre>\n            <code>{`// Use the same Promise return helper from above.\nvar returnApiDataFor = function(url) {\n  return new Promise(function(fulfill, reject) {\n    $.getJSON(url, function (response) {\n      fulfill(response.records);\n    });\n  });\n};\n\n// Define a helper to map a URL and page list to Promises.\nvar allPromisesFor = function(baseUrl, pages) {\n  // Map each page to a URL wrapped in a Promise to retrieve its data.\n  return pages.map(function(pageNumber) {\n    return returnApiDataFor(baseUrl + '?page=' + pageNumber);\n  });\n};\n\n// Invoke all Promises for a given base URL and pages.\nPromise.all(allPromisesFor('https://api.example.com', [1, 2, 3])\n  // Once all promises are fulfilled...\n  .then(function (recordSet) {\n    var allRecords = [];\n\n    // Concatenate / union all page responses to a single array.\n    recordSet.forEach(function(records) {\n      allRecords = allRecords.concat(records);\n    });\n\n    // Pass the complete data set to Tableau.\n    tableau.dataCallback(allRecords);\n  });`}</code>\n          </pre>\n          <p>\n            The API is simple. Just as a Promise maps to a future value,\n            <code>Promise.all</code> takes an array of Promises and maps them to\n            an array of future values: <code>[Promise, Promise, Promise]</code>{\" \"}\n            =>\n            <code>\n              [[{}], [{}], [{}]]\n            </code>\n            . After a simple union-like operation during post-processing, we can\n            pass the data back to Tableau in the format it expects{\" \"}\n            <code>\n              [{}, {}, {}]\n            </code>\n            , with no need to instruct Tableau to loop back and ask our WDC for\n            additional records.\n          </p>\n          <p>\n            Promises provide a way to strike a balance between application\n            performance and complexity: we can take advantage of some of\n            JavaScript's asynchronous features while maintaining code\n            readability and maintainability.\n          </p>\n          <h3>Things to consider</h3>\n          <p>\n            The Promise specification is part of{\" \"}\n            <a\n              href=\"https://github.com/lukehoban/es6features\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              ECMAScript 6\n            </a>\n            , the first significant update to the JavaScript language since\n            2009. Although many modern browsers support Promises natively, they\n            are currently unavailable in the WDC connection window in Tableau.\n            In order to use them, you will have to include a shim or polyfill\n            before your code.\n            <a\n              href=\"https://github.com/jakearchibald/es6-promise\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              ES6-Promise\n            </a>{\" \"}\n            and\n            <a\n              href=\"https://github.com/petkaantonov/bluebird/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              bluebird\n            </a>{\" \"}\n            are good options, but anything that is faithful to the spec should\n            do.{\" \"}\n            <a\n              href=\"https://gist.github.com/iamEAP/6a4212c17b22004117f2#file-install-promise-html\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              For example\n            </a>\n            :\n          </p>\n\n          <pre>\n            <code>{`<script src=\"es6-promise.min.js\"></script>\n<script src=\"jquery.min.js\"></script>\n<script src=\"wdc-sdk.js\"></script>\n<script src=\"your_wdc.js\"></script>`}</code>\n          </pre>\n\n          <p>\n            It's also worth noting that the number of persistent connections\n            that can be open for a given domain at any given time is fixed.\n            Browsers set this number anywhere between 4 and 8, but the WDC seems\n            to allow up to 6 simultaneous connections to a single host. This\n            ensures you can't overwhelm an API provider by opening up hundreds\n            or thousands of connections simultaneously. No need to implement\n            that safety mechanism yourself.\n          </p>\n          <p>\n            Finally, for the sake of brevity and clarity, all of the examples\n            above omit error handling of any kind. Beyond the benefits outlined\n            above, Promises can also help simplify fault tolerance in\n            asynchronous applications. I encourage you to{\" \"}\n            <a\n              href=\"https://blog.domenic.me/youre-missing-the-point-of-promises/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              explore JavaScript Promises\n            </a>{\" \"}\n            in more depth.\n          </p>\n        </div>\n      </article>\n    </Layout>\n  )\n}\n\nconst indexQuery = graphql`\n  query {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    promises: file(relativePath: { eq: \"legacy/promises.jpg\" }) {\n      childImageSharp {\n        fluid(maxWidth: 1360) {\n          ...GatsbyImageSharpFluid\n        }\n      }\n    }\n    waterfallSync: file(relativePath: { eq: \"legacy/waterfall-sync.png\" }) {\n      childImageSharp {\n        fluid(maxWidth: 1360) {\n          ...GatsbyImageSharpFluid\n        }\n      }\n    }\n    waterfallAsync: file(relativePath: { eq: \"legacy/waterfall-async.png\" }) {\n      childImageSharp {\n        fluid(maxWidth: 1360) {\n          ...GatsbyImageSharpFluid\n        }\n      }\n    }\n  }\n`\n\nexport default props => (\n  <StaticQuery\n    query={indexQuery}\n    render={data => (\n      <LegacyWdcPromisesPage location={props.location} data={data} {...props} />\n    )}\n  />\n)\n"],"sourceRoot":""}